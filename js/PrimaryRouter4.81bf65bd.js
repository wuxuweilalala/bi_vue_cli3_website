(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["PrimaryRouter4"],{"77ff":function(t,a,e){"use strict";var s=e("aa16"),n=e.n(s);n.a},"7d6b":function(t,a,e){},"8c6a":function(t,a,e){"use strict";var s=e("7d6b"),n=e.n(s);n.a},"8f4a":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"myData"},[e("div",{staticClass:"title"},[e("span",{staticClass:"vertical"}),e("span",{staticClass:"titleText unSelect"},[t._v("我的数据源")]),e("span",{directives:[{name:"show",rawName:"v-show",value:t.addShow,expression:"addShow"}],staticClass:"btn mainBtn"},[e("i",{staticClass:"icon biFont icon-add addData unSelect"}),e("span",{staticClass:"unSelect"},[t._v("添加数据")])])]),e("DataSource",{staticClass:"data-source",attrs:{dataTitle:t.dataTitle,requestUrl:t.requestUrl},on:{myDataBack:t.dataListEvent,chosenDataBack:t.chosenDataEvent}}),t.dataTable?e("DataShow",t._b({staticClass:"data-table"},"DataShow",{dataList:t.dataList,chosen:t.chosen},!1)):t._e()],1)},n=[],l=function(){var t=this,a=t.$createElement,e=t._self._c||a;return t.dataShow?e("div",{staticClass:"dataTable"},[e("div",{staticClass:"table"},[e("hot-table",{ref:"testHot",attrs:{settings:t.setHotTable,licenseKey:"non-commercial-and-evaluation"}})],1)]):t._e()},i=[],o=(e("cb29"),e("d3b7"),e("ac1f"),e("1276"),e("2909")),r=e("3c78"),c=(e("ed23"),e("250e"),{name:"dataSourceTable",components:{HotTable:r["a"]},props:["dataList","chosen"],data:function(){var t=this;return{userid:localStorage.getItem("userid"),token:localStorage.getItem("token"),field:null,addShow:!1,dataShow:!1,totalPage:null,handsonTable:null,HotTableTh:[],page:1,limit:30,tableObj:[],tipsData:{text:"",rel:"",time:1500},scrollOpt:{barColor:"#95A0B6",barWidth:6,railColor:"#475566",barMarginRight:0,barOpacityMin:.3},setHotTable:{data:[],width:"77.1vw",height:"83.3vh",rowHeaders:!1,colHeaders:[],readOnly:!0,stretchH:"all",className:"htLeft",currentColClassName:"currentCol",manualColumnResize:!0,autoWrapRow:!0,language:"zh-CN",fillHandle:!1,afterScrollVertically:function(){var a=t.$refs.testHot.$el.children[0].children[0],e=a.children[0].offsetHeight,s=e-a.offsetHeight;s<=a.scrollTop+5&&(t.page++,t.page<=t.totalPage&&t.requestData(t.page))}}}},methods:{requestData:function(t){var a=this,e=this;return e.$get("api/tableInfo",{source_sn:e.dataList.source_sn,id:e.dataList.id,page:t,limit:30}).then((function(s){var n,l=JSON.parse(JSON.stringify(s.data));if("000000"==s.code){if(e.dataShow=!0,1==t){if(0===l.tableinfo.length){var i=new Array(l.head.length).fill("");n=new Array(26).fill(i),l.tableinfo=n}else l.tableinfo.length<30&&(e.setHotTable.minSpareRows=26-l.tableinfo.length);e.setHotTable.data=l.tableinfo,e.setHotTable.colHeaders=l.head,Promise.resolve()}else{var r;(r=e.setHotTable.data).push.apply(r,Object(o["a"])(l.tableinfo))}e.totalPage=l.total_page}else a.tips.show([s.err_msg.split(":")[1]])}),(function(t){console.log(t)}))}},watch:{chosen:{handler:function(t,a){var e=this.handsonTable.propToCol(t.Field);this.handsonTable.selectColumns(e)}},dataList:{handler:function(t,a){this.requestData(1),this.setHotTable.data=null,this.setHotTable.colHeaders=null,this.heads=null}}},mounted:function(){var t=this;this.requestData(1).then((function(){t.$nextTick((function(){t.handsonTable=t.$refs.testHot.hotInstance}))}))}}),d=c,h=(e("77ff"),e("0c7c")),u=Object(h["a"])(d,l,i,!1,null,"b69eee80",null),f=u.exports,b=e("a1c2"),p={name:"myDataSource",components:{DataSource:b["default"],DataShow:f},data:function(){return{dataList:{id:null},chosen:null,myDataBack:"",addShow:!1,dataTable:!1,requestUrl:"api/dataInfo",dataTitle:{title:"数据源",icon:"dataBase"}}},mounted:function(){},methods:{dataListEvent:function(t){var a=this;t.id!=this.dataList.id&&(this.dataTable=!1,this.$nextTick((function(){a.dataTable=!0})),this.dataList=t)},chosenDataEvent:function(t){this.chosen=t.field,this.dataListEvent(t.data)}}},m=p,v=(e("8c6a"),Object(h["a"])(m,s,n,!1,null,"6e89d398",null));a["default"]=v.exports},aa16:function(t,a,e){}}]);
//# sourceMappingURL=PrimaryRouter4.81bf65bd.js.map